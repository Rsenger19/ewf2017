<?php

include_once('../categoriafiles/Categoria.php');
include_once('../collector/Collector.php');

class CategoriaCollector extends Collector
{
  
  function showCategorias() {
    $rows = self::$db->getRows("SELECT * FROM categoria ");        
    //echo "linea 1";
    $arrayCategoria= array();        
    foreach ($rows as $c){
      $aux = new Categoria($c{'id'},$c{'categoriadescripcion'});
      array_push($arrayCategoria, $aux);
    }
    return $arrayCategoria;        
  }

    function showCategoria($idcategoria) {
    $row = self::$db->getRows("SELECT * FROM categoria WHERE id= ?",array("{$idcategoria}"));
    $ObjCategoria= new Categoria($row[0]{'id'}, $row[0]{'categoriadescripcion'});

    return $ObjCategoria;        
  }

    function showCategoriaByDescription($categoria) {
    $row = self::$db->getRows("SELECT * FROM categoria WHERE categoriadescripcion= ?",array("{$categoria}"));
   $arrayCategoria= array();      
    foreach ($row as $c){
      $aux = new Categoria($c{'id'},$c{'categoriadescripcion'});
    }
    return $aux;        
  }
     function countCategoriaByDescription($categoria) {
    $row = self::$db->getRows("SELECT * FROM categoria WHERE categoriadescripcion= ?",array("{$categoria}"));
   $arrayCategoria= array(); 
            
    foreach ($row as $c){
      $aux = new Categoria($c{'id'},$c{'categoriadescripcion'});
      array_push($arrayCategoria, $aux);
    }
    return $arrayCategoria;        
  }

      function updateCategoria($idcategoria,$categoriadescripcion) {
    $insertrow = self::$db->updateRow("UPDATE public.categoria SET descripcion = ? WHERE id = ?", array("{$descripcion}",$idcategoria));  
      
  }

      function deleteCategoria($idcategoria) {
    $insertrow = self::$db->deleteRow("DELETE FROM public.categoria WHERE id=?",array("{$idcategoria}"));
      
  }

      function insertarCategoria($categoria) {
    $insertrow = self::$db->insertRow("INSERT INTO categoria (categoriadescripcion) VALUES (?) RETURNING id",array("{$categoria}"));
      $row = $insertrow;
    return $row;
  }

}
?>